
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>hakuna_mateti HomeServer</title>
  <style>
    :root { font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif; }
    body { margin: 0; padding: 0; background: #0b1220; color: #e6edf3; }
    .wrap { max-width: 760px; margin: 12vh auto; padding: 24px; }
    .card { background: #0f172a; border-radius: 16px; padding: 28px; box-shadow: 0 10px 25px rgba(0,0,0,.25); }
    h1 { margin: 0 0 12px; font-size: 28px; }
    p  { margin: 8px 0 20px; color: #a7b1c2; }
    .links { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 14px; }
    a.service { display: flex; align-items: center; justify-content: space-between;
                text-decoration: none; padding: 16px; border-radius: 12px;
                background: #111827; color: #e6edf3; border: 1px solid #1f2937; }
    a.service:hover { background: #0b1220; border-color: #334155; }
    .status { font-size: 14px; }
    .ok { color: #4ade80; }      /* green */
    .fail { color: #f87171; }    /* red */
    .small { margin-top: 18px; color: #8892a6; font-size: 13px; }
    code { background: rgba(255,255,255,.06); padding: 2px 6px; border-radius: 6px; }
  </style>
  <script>
    async function checkHealth(name, url) {
      try {
        const res = await fetch(url, { method: 'GET', mode: 'no-cors' });
        document.getElementById(name+'-status').textContent = "● Online";
        document.getElementById(name+'-status').className = "status ok";
      } catch(e) {
        document.getElementById(name+'-status').textContent = "● Offline";
        document.getElementById(name+'-status').className = "status fail";
      }
    }
    window.onload = () => {
      checkHealth("immich", "/photos");
      checkHealth("plex", "/plex");
    };
  </script>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>hakuna_mateti HomeServer</h1>
      <p>Welcome! Pick a service below.</p>
      <div class="links">
        <a class="service" href="/photos">📸 Photos (faststore)
          <span id="immich-status" class="status">…</span></a>
        <a class="service" href="/plex">🎬 Plex (warmstore)
          <span id="plex-status" class="status">…</span></a>
      </div>
      <p class="small">
        Tip: On phones, the <strong>apps</strong> work best with direct URLs:<br/>
        Immich → <code>https://&lt;macmini&gt;.&lt;tailnet&gt;.ts.net</code>,<br/>
        Plex → <code>https://&lt;macmini&gt;.&lt;tailnet&gt;.ts.net:32400</code>
      </p>
    </div>
  </div>
</body>
</html>
